<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Aksara Bali - Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
            border-bottom: 1px solid #333;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #999;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .timestamp {
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
        }
        
        .nav-links {
            margin-top: 20px;
        }
        
        .nav-links a {
            color: #999;
            text-decoration: none;
            margin: 0 10px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .nav-links a:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-links a.active {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .form-section {
            background: #111;
            border: 1px solid #333;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .form-title {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #bbb;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 16px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: #555;
            outline: none;
            background: #222;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .btn {
            padding: 12px 20px;
            border: 1px solid #333;
            border-radius: 8px;
            background: #1a1a1a;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            background: #333;
        }
        
        .btn-primary {
            background: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        
        .btn-primary:hover {
            background: #4338ca;
            border-color: #4338ca;
        }
        
        .btn-danger {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }
        
        .btn-danger:hover {
            background: #b91c1c;
            border-color: #b91c1c;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .file-upload {
            position: relative;
            width: 100%;
        }
        
        .file-input {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 10;
        }
        
        .file-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border: 2px dashed #333;
            border-radius: 8px;
            background: #1a1a1a;
            color: #bbb;
            font-size: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-label:hover {
            border-color: #4f46e5;
            color: #fff;
        }
        
        .file-label span {
            margin-left: 10px;
            font-weight: 500;
        }
        
        .preview-section {
            background: #111;
            border: 1px solid #333;
            border-radius: 16px;
            padding: 30px;
            margin-top: 40px;
        }
        
        .preview-title {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .aksara-preview {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
        }
        
        .aksara-char {
            font-size: 6rem;
            margin-bottom: 10px;
            line-height: 1;
        }
        
        .aksara-name {
            font-size: 1.2rem;
            color: #bbb;
            margin-top: 10px;
        }
        
        .aksara-details {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
        }
        
        .detail-row {
            display: grid;
            grid-template-columns: 120px 1fr;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }
        
        .detail-row:last-child {
            border-bottom: none;
        }
        
        .detail-label {
            font-weight: 500;
            color: #999;
        }
        
        .detail-value {
            color: #fff;
        }
        
        .model-preview {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 12px;
            height: 300px;
            position: relative;
            overflow: hidden;
            margin-top: 20px;
        }
        
        .model-not-available {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #666;
        }
        
        .alert {
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .alert-success {
            background: rgba(22, 163, 74, 0.2);
            border: 1px solid #16a34a;
            color: #4ade80;
        }
        
        .alert-error {
            background: rgba(220, 38, 38, 0.2);
            border: 1px solid #dc2626;
            color: #f87171;
        }
        
        .alert-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 20px;
            cursor: pointer;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .form-section, .preview-section {
                padding: 20px;
            }
            
            .preview-container {
                grid-template-columns: 1fr;
            }
            
            .aksara-char {
                font-size: 4rem;
            }
            
            .btn-group {
                flex-wrap: wrap;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Aksara Bali Digital</h1>
            <p class="subtitle">Upload Panel</p>
            <p class="timestamp" id="timestamp">Terakhir diperbarui: 21 Juni 2025, 09:52:10 UTC</p>
            <div class="nav-links">
                <a href="/">Beranda</a>
                <a href="/manage">Kelola Data</a>
            </div>
        </header>
        
        <div id="alertContainer" class="hidden"></div>
        
        <div class="form-section">
            <h2 class="form-title">Upload Aksara Baru</h2>
            
            <form id="uploadForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="aksaraBali">Aksara Bali</label>
                        <input type="text" class="form-control" id="aksaraBali" name="aksara_bali" placeholder="Masukkan aksara Bali" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="nama">Nama Aksara</label>
                        <input type="text" class="form-control" id="nama" name="nama" placeholder="Nama aksara" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="latin">Transliterasi Latin</label>
                        <input type="text" class="form-control" id="latin" name="latin" placeholder="Transliterasi dalam huruf latin" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="kategori">Kategori</label>
                        <select class="form-control" id="kategori" name="kategori" required>
                            <option value="">Semua Kategori</option>
                            <option value="Aksara Wianjana">Aksara Wianjana</option>
                            <option value="Gantungan">Gantungan</option>
                            <option value="Gempelan">Gempelan</option>
                            <option value="Aksara Swalalita">Aksara Swalalita</option>
                            <option value="Pengangge Aksara">Pengangge Suara</option>
                            <option value="Pengangge Tengenan">Pengangge Tengenan</option>
                            <option value="Aksara Suara">Aksara Suara</option>
                            <option value="Angka Bali">Angka Bali</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="unicodeAksara">Unicode</label>
                        <input type="text" class="form-control" id="unicodeAksara" name="unicode_aksara" placeholder="Unicode aksara (opsional)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="contohPenggunaan">Contoh Penggunaan</label>
                    <input type="text" class="form-control" id="contohPenggunaan" name="contoh_penggunaan" placeholder="Contoh penggunaan aksara">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="deskripsi">Deskripsi</label>
                    <textarea class="form-control" id="deskripsi" name="deskripsi" placeholder="Deskripsi mengenai aksara ini"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="modelFile">Model 3D (OBJ)</label>
                    <div class="file-upload">
                        <input type="file" class="file-input" id="modelFile" name="model_file" accept=".obj">
                        <div class="file-label">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11 14.9861C11 15.5384 11.4477 15.9861 12 15.9861C12.5523 15.9861 13 15.5384 13 14.9861V7.82831L16.2428 11.0711C16.6333 11.4616 17.2665 11.4616 17.657 11.0711C18.0475 10.6806 18.0475 10.0474 17.657 9.65692L12.7071 4.70703C12.3166 4.31651 11.6834 4.31651 11.2929 4.70703L6.34315 9.65692C5.95263 10.0474 5.95263 10.6806 6.34315 11.0711C6.73368 11.4616 7.36684 11.4616 7.75736 11.0711L11 7.82831V14.9861Z" fill="currentColor"/>
                                <path d="M4 14H6V18H18V14H20V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V14Z" fill="currentColor"/>
                            </svg>
                            <span id="fileNameLabel">Pilih file model 3D</span>
                        </div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button type="submit" class="btn btn-primary" id="submitBtn">Upload Aksara</button>
                    <button type="button" class="btn" id="previewBtn">Preview</button>
                    <button type="reset" class="btn btn-danger" id="resetBtn">Reset</button>
                </div>
            </form>
        </div>
        
        <div class="preview-section hidden" id="previewSection">
            <div class="preview-title">
                Preview Aksara
                <button class="btn" id="closePreviewBtn">Tutup</button>
            </div>
            
            <div class="preview-container">
                <div class="aksara-preview">
                    <div class="aksara-char" id="previewChar"></div>
                    <div class="aksara-name" id="previewName"></div>
                </div>
                
                <div class="aksara-details">
                    <div class="detail-row">
                        <div class="detail-label">Latin</div>
                        <div class="detail-value" id="previewLatin"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Kategori</div>
                        <div class="detail-value" id="previewKategori"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Unicode</div>
                        <div class="detail-value" id="previewUnicode"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Contoh</div>
                        <div class="detail-value" id="previewContoh"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Deskripsi</div>
                        <div class="detail-value" id="previewDeskripsi"></div>
                    </div>
                </div>
            </div>
            
            <div class="model-preview" id="modelPreview">
                <div class="model-not-available" id="modelNotAvailable">
                    <p>Model 3D belum dipilih</p>
                    <p style="font-size: 0.8rem; margin-top: 10px; color: #555;">Format yang didukung: OBJ</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const uploadForm = document.getElementById('uploadForm');
        const previewBtn = document.getElementById('previewBtn');
        const closePreviewBtn = document.getElementById('closePreviewBtn');
        const previewSection = document.getElementById('previewSection');
        const modelFile = document.getElementById('modelFile');
        const fileNameLabel = document.getElementById('fileNameLabel');
        const alertContainer = document.getElementById('alertContainer');
        const resetBtn = document.getElementById('resetBtn');
        
        const currentUser = 'kadekedwin';
        document.getElementById('timestamp').textContent = 'Terakhir diperbarui: 21 Juni 2025, 09:52:10 UTC';
        
        modelFile.addEventListener('change', function() {
            if (this.files && this.files.length > 0) {
                fileNameLabel.textContent = this.files[0].name;
            } else {
                fileNameLabel.textContent = 'Pilih file model 3D';
            }
        });
        
        previewBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            const aksaraBali = document.getElementById('aksaraBali').value;
            const nama = document.getElementById('nama').value;
            const latin = document.getElementById('latin').value;
            const kategori = document.getElementById('kategori').value;
            const unicode = document.getElementById('unicodeAksara').value;
            const contoh = document.getElementById('contohPenggunaan').value;
            const deskripsi = document.getElementById('deskripsi').value;
            
            document.getElementById('previewChar').textContent = aksaraBali || 'á¬“';
            document.getElementById('previewName').textContent = nama || 'Nama Aksara';
            document.getElementById('previewLatin').textContent = latin || '-';
            document.getElementById('previewKategori').textContent = kategori || '-';
            document.getElementById('previewUnicode').textContent = unicode || '-';
            document.getElementById('previewContoh').textContent = contoh || '-';
            document.getElementById('previewDeskripsi').textContent = deskripsi || '-';
            
            previewSection.classList.remove('hidden');
        });
        
        closePreviewBtn.addEventListener('click', function() {
            previewSection.classList.add('hidden');
        });
        
        uploadForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            formData.append('uploaded_by', currentUser);
            formData.append('upload_date', new Date().toISOString());
            
            try {
                document.getElementById('submitBtn').textContent = 'Mengunggah...';
                document.getElementById('submitBtn').disabled = true;
                
                const response = await fetch('/api/aksara', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('success', 'Aksara berhasil diunggah!');
                    resetForm();
                } else {
                    showAlert('error', `Gagal: ${result.message}`);
                }
            } catch (error) {
                showAlert('error', 'Gagal mengunggah aksara. Silakan coba lagi.');
                console.error('Upload error:', error);
            } finally {
                document.getElementById('submitBtn').textContent = 'Upload Aksara';
                document.getElementById('submitBtn').disabled = false;
            }
        });
        
        resetBtn.addEventListener('click', function() {
            resetForm();
        });
        
        function resetForm() {
            uploadForm.reset();
            fileNameLabel.textContent = 'Pilih file model 3D';
        }
        
        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `
                <div>${message}</div>
                <button class="alert-close">&times;</button>
            `;
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alertDiv);
            alertContainer.classList.remove('hidden');
            
            alertDiv.querySelector('.alert-close').addEventListener('click', function() {
                alertContainer.classList.add('hidden');
            });
            
            setTimeout(() => {
                alertContainer.classList.add('hidden');
            }, 5000);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            resetForm();
        });
    </script>
</body>
</html>